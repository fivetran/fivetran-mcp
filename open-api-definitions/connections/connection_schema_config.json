{
  "openapi": "3.0.1",
  "info": {
    "title": "Retrieve a Connection Schema Config",
    "description": "\nReturns the top-level schema configuration for an existing connection within your Fivetran account. The response includes global flags, every schema, each table, and only the columns that were explicitly overridden. \n\nUse this endpoint to read the current data-selection tree for a connection, or to copy the configuration to another connection.\n\nFor more information, see the [Connection Schema config](https://fivetran.com/docs/rest-api/tutorials/connection-schema-configuration-use-cases) tutorial.\n\n> Note: Unedited columns (those following table defaults) are omitted from the response. For a real-time, exhaustive column list for a specific table, call the [Retrieve Source Table Columns Config](/docs/rest-api/api-reference/connection-schema/connection-column-config) endpoint. \n\nFor the NetSuite SuiteAnalytics, and Salesforce and Salesforce Sandbox connectors, the 'schemas' map field contains a single entry with the 'netsuite' or 'salesforce' key, respectively. For the 'schema.name_in_destination` name field, these connectors always return the destination schema name you set in the connection setup form.\n\nFor more information on using this API endpoint with the the Oracle Fusion Cloud Applications connectors, see the [Schema information documentation](https://fivetran.com/docs/connectors/applications/oracle-fusion-cloud-applications#schemainformation).\n"
  },
  "path": "/v1/connections/{connectionId}/schemas",
  "method": "GET",
  "operation": {
    "tags": [
      "Connection Schema Management"
    ],
    "summary": "Retrieve a Connection Schema Config",
    "description": "\nReturns the top-level schema configuration for an existing connection within your Fivetran account. The response includes global flags, every schema, each table, and only the columns that were explicitly overridden. \n\nUse this endpoint to read the current data-selection tree for a connection, or to copy the configuration to another connection.\n\nFor more information, see the [Connection Schema config](https://fivetran.com/docs/rest-api/tutorials/connection-schema-configuration-use-cases) tutorial.\n\n> Note: Unedited columns (those following table defaults) are omitted from the response. For a real-time, exhaustive column list for a specific table, call the [Retrieve Source Table Columns Config](/docs/rest-api/api-reference/connection-schema/connection-column-config) endpoint. \n\nFor the NetSuite SuiteAnalytics, and Salesforce and Salesforce Sandbox connectors, the 'schemas' map field contains a single entry with the 'netsuite' or 'salesforce' key, respectively. For the 'schema.name_in_destination` name field, these connectors always return the destination schema name you set in the connection setup form.\n\nFor more information on using this API endpoint with the the Oracle Fusion Cloud Applications connectors, see the [Schema information documentation](https://fivetran.com/docs/connectors/applications/oracle-fusion-cloud-applications#schemainformation).\n",
    "operationId": "connection_schema_config",
    "parameters": [
      {
        "name": "connectionId",
        "in": "path",
        "description": "The unique identifier for the connection within the Fivetran system.",
        "required": true,
        "schema": {
          "type": "string",
          "example": "connectionId"
        },
        "example": "connectionId"
      },
      {
        "name": "Accept",
        "in": "header",
        "schema": {
          "type": "string",
          "example": "application/json",
          "default": "application/json"
        }
      }
    ],
    "responses": {
      "200": {
        "description": "Successful response",
        "content": {
          "application/json": {
            "schema": {
              "required": [
                "code",
                "data"
              ],
              "properties": {
                "code": {
                  "type": "string",
                  "description": "Response status code",
                  "example": "Success"
                },
                "message": {
                  "type": "string",
                  "description": "Response status text",
                  "example": "Operation performed."
                },
                "data": {
                  "$ref": "#/components/schemas/StandardConfigResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "StandardConfigResponse": {
        "required": [
          "schema_change_handling",
          "schemas"
        ],
        "type": "object",
        "properties": {
          "enable_new_by_default": {
            "type": "boolean",
            "description": "The boolean value specifying whether to enable new schemas, tables, and columns by default",
            "example": true
          },
          "schemas": {
            "title": "Schemas",
            "type": "object",
            "properties": {
              "schema": {
                "$ref": "#/components/schemas/SchemaConfigResponse"
              }
            },
            "description": "The set of schemas within your connection schema config."
          },
          "schema_change_handling": {
            "type": "string",
            "description": "The possible values for the schema_change_handling parameter are as follows: <br /> ALLOW_ALL - all new schemas, tables, and columns which appear in the source after the initial setup are included in syncs <br /> ALLOW_COLUMNS - all new schemas and tables which appear in the source after the initial setup are excluded from syncs, but new columns are included <br /> BLOCK_ALL - all new schemas, tables, and columns which appear in the source after the initial setup are excluded from syncs",
            "example": "ALLOW_ALL",
            "enum": [
              "ALLOW_ALL",
              "ALLOW_COLUMNS",
              "BLOCK_ALL"
            ]
          }
        }
      },
      "SchemaConfigResponse": {
        "required": [
          "enabled",
          "name_in_destination",
          "tables"
        ],
        "type": "object",
        "properties": {
          "name_in_destination": {
            "type": "string",
            "description": "The schema name within your destination in accordance with Fivetran conventional rules",
            "example": "schema_name_in_destination"
          },
          "enabled": {
            "type": "boolean",
            "description": "The boolean value specifying whether the sync for the table into the destination is enabled.",
            "example": true
          },
          "tables": {
            "title": "Tables",
            "type": "object",
            "properties": {
              "table": {
                "$ref": "#/components/schemas/TableConfigResponse"
              }
            },
            "description": "The set of tables within your database schema config."
          }
        }
      },
      "TableConfigResponse": {
        "required": [
          "columns",
          "enabled",
          "enabled_patch_settings",
          "name_in_destination"
        ],
        "type": "object",
        "properties": {
          "sync_mode": {
            "type": "string",
            "description": "This field appears in the response if the connection supports switching sync modes for tables",
            "example": "SOFT_DELETE",
            "enum": [
              "SOFT_DELETE",
              "HISTORY",
              "LIVE"
            ]
          },
          "name_in_destination": {
            "type": "string",
            "description": "The schema name within your destination in accordance with Fivetran conventional rules",
            "example": "table_name_in_destination"
          },
          "enabled": {
            "type": "boolean",
            "description": "The boolean value specifying whether the sync for the table into the destination is enabled.",
            "example": true
          },
          "columns": {
            "title": "Columns",
            "type": "object",
            "properties": {
              "column": {
                "$ref": "#/components/schemas/ColumnConfigResponse"
              }
            },
            "description": "The set of columns within your table schema config. The `columns` object in the response contains the columns whose `enabled` value has been set by the user after the initial sync."
          },
          "enabled_patch_settings": {
            "$ref": "#/components/schemas/TableEnabledPatchSettings"
          },
          "supports_columns_config": {
            "type": "boolean"
          }
        }
      },
      "ColumnConfigResponse": {
        "required": [
          "enabled",
          "enabled_patch_settings",
          "hashed",
          "name_in_destination"
        ],
        "type": "object",
        "properties": {
          "name_in_destination": {
            "type": "string",
            "description": "The schema name within your destination in accordance with Fivetran conventional rules",
            "example": "column_name_in_destination"
          },
          "enabled": {
            "type": "boolean",
            "description": "The boolean value specifying whether the sync for the table into the destination is enabled.",
            "example": true
          },
          "hashed": {
            "type": "boolean",
            "description": "The boolean value specifying whether a column should be hashed",
            "example": false
          },
          "enabled_patch_settings": {
            "$ref": "#/components/schemas/ColumnEnabledPatchSettings"
          },
          "is_primary_key": {
            "type": "boolean"
          }
        }
      },
      "ColumnEnabledPatchSettings": {
        "required": [
          "allowed"
        ],
        "type": "object",
        "properties": {
          "allowed": {
            "type": "boolean",
            "description": "The boolean value specifying whether the enabled property can be updated",
            "example": false
          },
          "reason": {
            "type": "string",
            "description": "The additional message indicating the reason why the enabled property cannot be updated. This field appears in the response only when the reason_code value is OTHER",
            "example": "..."
          },
          "reason_code": {
            "type": "string",
            "description": "The reason code indicating the reason why the enabled property cannot be updated: <br /> SYSTEM_TABLE - the table is a system table <br /> DELETED - the table was deleted in the source <br /> OTHER - the table was excluded by the system for some reason <br /> This field appears in the response when the allowed property value is FALSE",
            "example": "SYSTEM_COLUMN",
            "enum": [
              "SYSTEM_COLUMN",
              "DELETED",
              "OTHER"
            ]
          }
        }
      },
      "TableEnabledPatchSettings": {
        "required": [
          "allowed"
        ],
        "type": "object",
        "properties": {
          "allowed": {
            "type": "boolean",
            "description": "The boolean value specifying whether the enabled property can be updated",
            "example": false
          },
          "reason": {
            "type": "string",
            "description": "The additional message indicating the reason why the enabled property cannot be updated. This field appears in the response only when the reason_code value is OTHER",
            "example": "..."
          },
          "reason_code": {
            "type": "string",
            "description": "The reason code indicating the reason why the enabled property cannot be updated: <br /> SYSTEM_TABLE - the table is a system table <br /> DELETED - the table was deleted in the source <br /> OTHER - the table was excluded by the system for some reason <br /> This field appears in the response when the allowed property value is FALSE",
            "example": "SYSTEM_TABLE",
            "enum": [
              "SYSTEM_TABLE",
              "DELETED",
              "OTHER"
            ]
          }
        }
      }
    }
  }
}